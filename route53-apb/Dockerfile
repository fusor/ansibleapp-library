FROM ansibleapp/ansibleapp-base
# MAINTAINER {{ $MAINTAINER }}

LABEL "com.redhat.ansibleapp.version"="0.1.0"
LABEL "com.redhat.ansibleapp.spec"=\
"aWQ6IDllODc3MmE1LTczYWMtNGNhYi1hMDg5LWExNjdhMGQ5NzJhNQpuYW1lOiByb3V0ZTUzLWFw\
YgppbWFnZTogYW5zaWJsZXBsYXlib29rYnVuZGxlL3JvdXRlNTMtYXBiCmRlc2NyaXB0aW9uOiBI\
aWdobHkgYXZhaWxhYmxlIGFuZCBzY2FsYWJsZSBjbG91ZCBEb21haW4gTmFtZSBTeXN0ZW0gKERO\
Uykgd2ViIHNlcnZpY2UuCmJpbmRhYmxlOiB0cnVlCmFzeW5jOiBvcHRpb25hbApwYXJhbWV0ZXJz\
OiB7fQptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogIkFtYXpvbiBSb3V0ZTUzIgogIGxvbmdEZXNj\
cmlwdGlvbjogIkFtYXpvbiBSb3V0ZSA1MyBpcyBhIGhpZ2hseSBhdmFpbGFibGUgYW5kIHNjYWxh\
YmxlIGNsb3VkIERvbWFpbiBOYW1lIFN5c3RlbSAoRE5TKSB3ZWIgc2VydmljZS4gSXQgaXMgZGVz\
aWduZWQgdG8gZ2l2ZSBkZXZlbG9wZXJzIGFuZCBidXNpbmVzc2VzIGFuIGV4dHJlbWVseSByZWxp\
YWJsZSBhbmQgY29zdCBlZmZlY3RpdmUgd2F5IHRvIHJvdXRlIGVuZCB1c2VycyB0byBJbnRlcm5l\
dCBhcHBsaWNhdGlvbnMgYnkgdHJhbnNsYXRpbmcgbmFtZXMgbGlrZSB3d3cuZXhhbXBsZS5jb20g\
aW50byB0aGUgbnVtZXJpYyBJUCBhZGRyZXNzZXMgbGlrZSAxOTIuMC4yLjEgdGhhdCBjb21wdXRl\
cnMgdXNlIHRvIGNvbm5lY3QgdG8gZWFjaCBvdGhlci4gQW1hem9uIFJvdXRlIDUzIGlzIGZ1bGx5\
IGNvbXBsaWFudCB3aXRoIElQdjYgYXMgd2VsbC4iCiAgaW1hZ2VVcmw6ICJodHRwczovL3MzLmFt\
YXpvbmF3cy5jb20vZnVzb3IvMjAxN2RlbW8vTmV0d29ya2luZ0NvbnRlbnREZWxpdmVyeV9BbWF6\
b25Sb3V0ZTUzLnBuZyIKICB0YWdzOgogICAgLSBBbWF6b24KICAgIC0gTmV0d29ya2luZwogICAg\
LSBDb250ZW50IERlbGl2ZXJ5CiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vYXdzLmFtYXpv\
bi5jb20vcm91dGU1My8iCgo="
ADD ansible /opt/ansible
ADD ansibleapp /opt/ansibleapp

RUN useradd -u 1001 -r -g 0 -M -b /opt/ansibleapp -s /sbin/nologin -c "ansibleapp user" ansibleapp
RUN chown -R 1001:0 /opt/{ansible,ansibleapp}
USER 1001
